<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Coding Challenge VTEX</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="lib/bootstrap/bootstrap.css">
    <link rel="stylesheet" href="style/main.css">
  </head>

  <body>
    <div class="container">

    <div id="example"></div>
      
      <div class="row">
        <h1>Dev Shop</h1>
      </div>

      <div class="row" style="height: 205px; overflow: scroll;">
        <h2>List of Developers</h2>
            
          <table class="table" id="devs">
            <thead>
              <tr>
                <th>Photo</th>
                <th>Name</th>
                <th>Price</th>
                <th></th>
              </tr>
            </thead>
          </table>  
      </div>

      <div class="cart row">
        <h2>Cart</h2>
        <table class="table" id="cart">
          <thead>
            <tr>
              <th>Username</th>
              <th>Price</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
           <!--  <tr class="product">
              <td>brenoc</td>
              <td>$224</td>
              <td><button class="btn btn-danger pull-right">Remove</button></td>
            </tr>
            <tr class="product">
              <td>firstdoit</td>
              <td>$416</td>
              <td><button class="btn btn-danger pull-right">Remove</button></td>
            </tr> -->
          </tbody>
        </table>
      </div>

      <div class="totalizer row">
        <div class="col-sm-5">
          <div class="row">
            <table class="table">
              <tbody>
                <tr class="total">
                  <td>Total</td>
                  <td id="total-cart">$640</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div> <!-- /container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="lib/jquery/jquery-1.11.2.min.js"><\/script>')</script>

    <script src="lib/bootstrap/bootstrap.js"></script>
    <script src="lib/react/react.min.js"></script>
    <script src="lib/react/JSXTransformer.js"></script>
    <script type="text/javascript" src="script/main.js"></script>

    <script type="text/jsx">
        var Users = React.createClass({
          getDevs: function(){
            var list_of_devs = null;

            $.ajax({
              url: this.props.source,
              type: 'get',
              dataType: 'json',
              async: false,
              success: function(data) {
                  list_of_devs = data;
              } 
            });

            return list_of_devs;
          },

          render: function() {
            return (
              <tbody>
                {this.getDevs().map(function(dev){
                  return <tr class="product">
                      <td><img width="50" height="50" src={dev.avatar_url} /> </td>
                      <td>{dev.login}</td>
                      <td>${price = Math.floor((Math.random() * 100) + 1)} </td>
                      <td>
                        <button data-id={dev.id} data-username={dev.login} data-price={price} class="btn btn-success pull-right" >Add</button>
                      </td>
                    </tr>                    
                })}
              </tbody>
            );
          }
        });

        React.render(
          <Users source="https://api.github.com/users" />,
          document.getElementById('devs')
        ); 
    </script>
  </body>
</html>
